<!DOCTYPE html5>
<html lang="en">
    <head>
            <title>Land Acknowledgement</title>
            <meta charset="UTF-8">
            <meta name="format-detection" content="telephone=no">
            <meta property="og:title" content="Land Acknowledgement" />
            <meta property="og:type" content="article" />
            <!-- <meta property="og:image" content="http://land.codeforanchorage.org/img/coldCar_small.png" />
            <meta property="og:url" content="http://land.codeforanchorage.org" /> -->
            <meta property="og:description" content="Learn more about the land you're living, working, or recreating on." />
            <meta name="twitter:card" content="summary" />
            <meta name="twitter:title" content="Land Acknowledgement" />
            <meta name="twitter:description" content="Learn more about the land you're living, working, or recreating on." />
            <!-- <meta name="twitter:image" content="http://land.codeforanchorage.org/img/coldCar_small.png" /> -->
            <meta name="description" content="Learn more about the land you're living, working, or recreating on.">
            <meta name="viewport" content="width=device-width, initial-scale=1">
            <link href="https://fonts.googleapis.com/css?family=Arvo:400,700" rel="stylesheet">
            <link rel="stylesheet" type="text/css" href="css/style.css">
            <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-56999250-1', 'auto');
            ga('send', 'pageview');
        </script>    
                
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js" integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous"></script>
            
    </head>
    <body>
        <main id="content">
            <header>
            <h1>Land Acknowledgement</h1>
            </header>
<!--           <section>    -->
           <!-- <form id='landForm' onsubmit ="submitFunction(e)" > -->
<!--            <h1>Whose land am I on?</h1>              -->
<!--          <form id = 'landForm'>                      -->
<!--              <input type="text" id="textInput">      -->
<!--              <input type="submit" >                  -->
<!--          </form>                                     -->
<!--          <h1><div id="output"></div></h1>            -->    
<!--          </section>                                  --> 
            <section>
                <p class="subtext">Just message your Canadian or US zip code or [city, state], or city, state & country for Australia and NZ to the</p>
                <span class="phoneNumber"><a target="_blank" href="https://www.messenger.com/t/LandAcknowledgement">Facebook Messenger bot</a> or 1-855-917-5263 (LAND)</span>
                <p class="subtext">and we'll send you the Native land you're living, working, or recreating on.</p>
            </section>
            <hr/>
              <section>
                <p>Land Acknowledgement is an SMS and Facebook Messenger bot leveraging data from Canadian not-for-profit, <a target="_blank" href="https://native-land.ca/">Native Land</a>,
                    who ask that people use the data carefully because confirmation by nations is pending and they are updating data weekly. Consider joining
                    their <a target="_blnak" href="https://www.patreon.com/nativeland">Patreon commumity</A> to help fund their research and projects.</p>
                <p>November is National Native Heritage Month. Here is a good resource on 
                    <a target="_blank" href="https://embracingequity.org/blog/2019/5/1/honor-native-land">Land Acknowledgement</a></p>
            </section>
            <section>
                <p>The application is a collaboration between <a target="_blank" href="https://codeforanchorage.org">Code for Anchorage</a> and the <a target="_blank" href="https://medium.com/anchorage-i-team">Anchorage i-team</a>, a
                    <a target="_blank" href="http://www.muni.org/pages/default.aspx">Municipality of Anchorage</a> Bloomberg Philanthropy
                    <a target="_blank" href="https://www.bloomberg.org/program/government-innovation/innovation-teams/#overview">Innovation Team</a>.</p>
            </section>
            <br/>
            <section>
                <p>
                    This is an <a target="_blank" href="https://github.com/codeforanchorage/land_acknowledgement">open source project</a>.
                </p>
            </section>
        </main>
    </body>
<script>
                        
document.getElementById('landForm').addEventListener('submit', submitFunction)                        

function submitFunction(e) {

  console.log("top of un")
  
  // console.log('the form content')
  console.log("this isthe value???")
  console.log(e.target[0].value)
  console.log(e)

// var textInput = document.getElementById("textInput").value
// console.log(textInput)

  // const base_url = "https://ak-land.herokuapp.com/"
  // const base_url = "https://ak-land.herokuapp.com/?Body=austin,mn"
  const base_url = `https://cors-anywhere.herokuapp.com/https://ak-land.herokuapp.com/?Body=${e.target[0].value}`
  const location_url = `https://ak-land.herokuapp.com/?Body=${textInput}`

  // console.log(location_url)

  e.preventDefault();


  axios.post(base_url)
  .then(function(response)  {

    var parser = new DOMParser();

    console.log(response.data);


var xml_parsed =  parser.parseFromString(response.data,"text/xml");

console.log(xml_parsed)


//this isthe formatted version
var xml_parsed_format = xml_parsed.getElementsByTagName("Message")[0].childNodes[0].nodeValue;
console.log (xml_parsed_format)

    
// var string_length = xml_parsed_format.length;
// var xml_parsed_format_short = xml_parsed_format.slice(0, string_length-26)

//cut off the last sentance
var xml_parsed_format_short = xml_parsed_format.replace("More info: bit.ly/landackn", " ")


document.getElementById('output').innerHTML = xml_parsed_format_short

  }, (error) => {
    console.log(error);
  });
 
}

            </script>
                        
</html>
